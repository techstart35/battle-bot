# battle-bot

DiscordのBattle botです。

Rumble loyalの日本語ver.を想定して作成しています。

## bot名

Battle Royale

## Bot管理コンパネ

以下のURLでコンパネにアクセスできます。

[コンパネURL](https://discord.com/developers/applications/975019338534899733/information)

## 導入方法

以下のURLでサーバーに追加することができます。

[サーバー追加URL](https://discord.com/api/oauth2/authorize?client_id=975019338534899733&permissions=275146427456&scope=bot)

## 権限

以下の権限を許可しています。

- GENERAL PERMISSIONS
    - Manage Roles（ロールの管理）
    - Read Messages/View Channels（メッセージを見る）
- TEXT PERMISSIONS
    - Send Messages（メッセージを送信）
    - Send Messages in Threads（スレッドでメッセージを送信）
    - Embed Links（埋め込みリンク）
    - Read Message History（メッセージ履歴を読む）
    - Add Reaction（リアクションの追加）

## botコマンド

- そのチャンネルのみで配信する場合

```
b
```

- 別チャンネルで途中経過を配信する場合

※該当チャンネルの書き込み権限を確認してください

```
b <チャンネルリンク>
```

- バトルを停止する場合

※起動したチャンネルで以下のコマンドを実行します

```
stopb
```

- 起動中のバトルを表示する場合

```
listb
```

- 新規バトルを中止する場合

※起動中のバトルは中断されません

※フラグを戻すコマンドは用意していないため、コンテナを起動し直す必要があります

```
rejectstartb
```

## リリース前チェックシート

### 正常

#### 1回目（正常起動 3名以上）

- [ ] 通常起動ができる(b)
- [ ] プロセスが"起動中"となっている
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 2回目（NoEntry）

- [ ] 通常起動ができる(b)
- [ ] エントリー無い場合、NoEntryメッセージが送信される
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 3回目（参加者1名）

- [ ] 通常起動ができる(b)
- [ ] エントリーが1名の場合、すぐにWinnerメッセージが送信される
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 4回目（エントリーメッセージ後にstop）

- [ ] エントリーメッセージ送信後にstopbコマンドが実行できる
- [ ] プロセスが"キャンセル済"となっている
- [ ] キャンセル済の時点で重複起動ができない
- [ ] プロセスが削除されている

#### 5回目（カウントダウンの途中でstop）※可能なら60,30,10の後全てで

- [ ] カウントダウンの途中でstopbコマンドが実行できる
- [ ] プロセスが"キャンセル済"となっている
- [ ] プロセスが削除されている

#### 6回目（スタートメッセージ後にstop）

- [ ] バトルスタートメッセージ送信後にstopbコマンドが実行できる
- [ ] プロセスが"キャンセル済"となっている
- [ ] プロセスが削除されている

#### 7回目（バトルの途中でstop）

- [ ] バトルメッセージの途中でstopbコマンドが実行できる
- [ ] プロセスが"キャンセル済"となっている
- [ ] プロセスが削除されている

#### 8回目（新規起動の停止）

- [ ] rejectstartbコマンドで新規起動を停止できる

#### 9回目（新規起動停止の解除）

- [ ] rejectstartbコマンド実行後にアップデートで解除できる
- [ ] 複数サーバーで同時に起動できる

#### 10回目（重複起動）

- [ ] 別チャンネルで重複起動した時にエラーメッセージが表示できる
- [ ] 重複起動時にエラーメッセージを送信できる

#### 11回目（エントリーメッセージ削除時）

- [ ] エントリーメッセージ削除時にエラーメッセージが送信される

#### 12回目（不正コマンド）

- [ ] 不正な引数入力時にエラーメッセージが表示できる

#### 13回目（配信）

- [ ] b <#チャンネルID>で別チャンネルに配信できる
- [ ] プロセスが"起動中"となっている
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 14回目（配信 & NoEntry）

- [ ] b <#チャンネルID>で別チャンネルに配信できる
- [ ] プロセスが"起動中"となっている
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 15回目（配信 & 参加者1名）

- [ ] b <#チャンネルID>で別チャンネルに配信できる
- [ ] プロセスが"起動中"となっている
- [ ] 起動終了通知が送信されている
- [ ] プロセスが削除されている

#### 16回目（別サーバーで起動できる）